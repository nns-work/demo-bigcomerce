{"version":3,"file":"theme-bundle.chunk.23.js","mappings":"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","sources":["webpack://second-skin-audio/./assets/js/theme/account.js","webpack://second-skin-audio/./assets/js/theme/common/form-validation.js"],"sourcesContent":["import PageManager from './page-manager';\nimport $ from 'jquery';\nimport nod from './common/nod';\nimport Wishlist from './wishlist';\nimport validation from './common/form-validation';\nimport stateCountry from './common/state-country';\nimport { classifyForm, Validators, insertStateHiddenField } from './common/form-utils';\nimport swal from 'sweetalert2';\n\nexport default class Account extends PageManager {\n    constructor(context) {\n        super(context);\n\n        this.$state = $('[data-field-type=\"State\"]');\n        this.$body = $('body');\n    }\n\n    onReady() {\n        const $editAccountForm = classifyForm('form[data-edit-account-form]');\n        const $addressForm = classifyForm('form[data-address-form]');\n        const $inboxForm = classifyForm('form[data-inbox-form]');\n        const $accountReturnForm = classifyForm('[data-account-return-form]');\n        const $reorderForm = classifyForm('[data-account-reorder-form]');\n        const $invoiceButton = $('[data-print-invoice]');\n\n        // Injected via template\n        this.passwordRequirements = this.context.passwordRequirements;\n\n        // Instantiates wish list JS\n        Wishlist.load(this.context);\n\n        if ($editAccountForm.length) {\n            this.registerEditAccountValidation($editAccountForm);\n            if (this.$state.is('input')) {\n                insertStateHiddenField(this.$state);\n            }\n        }\n\n        if ($invoiceButton.length) {\n            $invoiceButton.on('click', () => {\n                const left = window.screen.availWidth / 2 - 450;\n                const top = window.screen.availHeight / 2 - 320;\n                const url = $invoiceButton.data('printInvoice');\n\n                window.open(url, 'orderInvoice', `width=900,height=650,left=${left},top=${top},scrollbars=1`);\n            });\n        }\n\n        if ($addressForm.length) {\n            this.initAddressFormValidation($addressForm);\n\n            if (this.$state.is('input')) {\n                insertStateHiddenField(this.$state);\n            }\n        }\n\n        if ($inboxForm.length) {\n            this.registerInboxValidation($inboxForm);\n        }\n\n        if ($accountReturnForm.length) {\n            this.initAccountReturnFormValidation($accountReturnForm);\n        }\n\n        if ($reorderForm.length) {\n            this.initReorderForm($reorderForm);\n        }\n\n        this.bindDeleteAddress();\n    }\n\n    /**\n     * Binds a submit hook to ensure the customer receives a confirmation dialog before deleting an address\n     */\n    bindDeleteAddress() {\n        $('[data-delete-address]').on('submit', event => {\n            const message = $(event.currentTarget).data('deleteAddress');\n\n            if (!window.confirm(message)) {\n                event.preventDefault();\n            }\n        });\n    }\n\n    initReorderForm($reorderForm) {\n        $reorderForm.on('submit', event => {\n            const $productReorderCheckboxes = $('.account-listItem .form-checkbox:checked');\n            let submitForm = false;\n\n            $reorderForm.find('[name^=\"reorderitem\"]').remove();\n\n            $productReorderCheckboxes.each((index, productCheckbox) => {\n                const productId = $(productCheckbox).val();\n                const $input = $('<input>', {\n                    type: 'hidden',\n                    name: `reorderitem[${productId}]`,\n                    value: '1',\n                });\n\n                submitForm = true;\n\n                $reorderForm.append($input);\n            });\n\n            if (!submitForm) {\n                event.preventDefault();\n                swal({\n                    text: this.context.selectItem,\n                    type: 'error',\n                });\n            }\n        });\n    }\n\n    initAddressFormValidation($addressForm) {\n        const validationModel = validation($addressForm);\n        const stateSelector = 'form[data-address-form] [data-field-type=\"State\"]';\n        const $stateElement = $(stateSelector);\n        const addressValidator = nod({\n            submit: 'form[data-address-form] input[type=\"submit\"]',\n        });\n\n        addressValidator.add(validationModel);\n\n        if ($stateElement) {\n            let $last;\n\n            // Requests the states for a country with AJAX\n            stateCountry($stateElement, this.context, (err, field) => {\n                if (err) {\n                    throw new Error(err);\n                }\n\n                const $field = $(field);\n\n                if (addressValidator.getStatus($stateElement) !== 'undefined') {\n                    addressValidator.remove($stateElement);\n                }\n\n                if ($last) {\n                    addressValidator.remove($last);\n                }\n\n                if ($field.is('select')) {\n                    $last = field;\n                    Validators.setStateCountryValidation(addressValidator, field);\n                } else {\n                    Validators.cleanUpStateValidation(field);\n                }\n            });\n        }\n\n        $addressForm.on('submit', event => {\n            addressValidator.performCheck();\n\n            if (addressValidator.areAll('valid')) {\n                return;\n            }\n\n            event.preventDefault();\n        });\n    }\n\n    initAccountReturnFormValidation($accountReturnForm) {\n        const errorMessage = $accountReturnForm.data('accountReturnFormError');\n\n        $accountReturnForm.on('submit', event => {\n            let formSubmit = false;\n\n            // Iterate until we find a non-zero value in the dropdown for quantity\n            $('[name^=\"return_qty\"]', $accountReturnForm).each((i, ele) => {\n                if (parseInt($(ele).val(), 10) !== 0) {\n                    formSubmit = true;\n\n                    // Exit out of loop if we found at least one return\n                    return true;\n                }\n            });\n\n            if (formSubmit) {\n                return true;\n            }\n\n            swal({\n                text: errorMessage,\n                type: 'error',\n            });\n\n            return event.preventDefault();\n        });\n    }\n\n    registerEditAccountValidation($editAccountForm) {\n        const validationModel = validation($editAccountForm);\n        const formEditSelector = 'form[data-edit-account-form]';\n        const editValidator = nod({\n            submit: '${formEditSelector} input[type=\"submit\"]',\n        });\n        const emailSelector = `${formEditSelector} [data-field-type=\"EmailAddress\"]`;\n        const $emailElement = $(emailSelector);\n        const passwordSelector = `${formEditSelector} [data-field-type=\"Password\"]`;\n        const $passwordElement = $(passwordSelector);\n        const password2Selector = `${formEditSelector} [data-field-type=\"ConfirmPassword\"]`;\n        const $password2Element = $(password2Selector);\n        const currentPasswordSelector = `${formEditSelector} [data-field-type=\"CurrentPassword\"]`;\n        const $currentPassword = $(currentPasswordSelector);\n\n        // This only handles the custom fields, standard fields are added below\n        editValidator.add(validationModel);\n\n        if ($emailElement) {\n            editValidator.remove(emailSelector);\n            Validators.setEmailValidation(editValidator, emailSelector);\n        }\n\n        if ($passwordElement && $password2Element) {\n            editValidator.remove(passwordSelector);\n            editValidator.remove(password2Selector);\n            Validators.setPasswordValidation(\n                editValidator,\n                passwordSelector,\n                password2Selector,\n                this.passwordRequirements,\n                true,\n            );\n        }\n\n        if ($currentPassword) {\n            editValidator.add({\n                selector: currentPasswordSelector,\n                validate: (cb, val) => {\n                    let result = true;\n\n                    if (val === '' && $passwordElement.val() !== '') {\n                        result = false;\n                    }\n\n                    cb(result);\n                },\n                errorMessage: this.context.currentPassword,\n            });\n        }\n\n        editValidator.add([\n            {\n                selector: `${formEditSelector} input[name='account_firstname']`,\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    cb(result);\n                },\n                errorMessage: this.context.firstName,\n            },\n            {\n                selector: `${formEditSelector} input[name='account_lastname']`,\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    cb(result);\n                },\n                errorMessage: this.context.lastName,\n            },\n            {\n                selector: `${formEditSelector} input[name='account_phone']`,\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    cb(result);\n                },\n                errorMessage: this.context.phoneNumber,\n            },\n        ]);\n\n        $editAccountForm.on('submit', event => {\n            editValidator.performCheck();\n\n            if (editValidator.areAll('valid')) {\n                return;\n            }\n\n            event.preventDefault();\n        });\n    }\n\n    registerInboxValidation($inboxForm) {\n        const inboxValidator = nod({\n            submit: 'form[data-inbox-form] input[type=\"submit\"]',\n        });\n\n        inboxValidator.add([\n            {\n                selector: 'form[data-inbox-form] select[name=\"message_order_id\"]',\n                validate: (cb, val) => {\n                    const result = Number(val) !== 0;\n\n                    cb(result);\n                },\n                errorMessage: this.context.enterOrderNum,\n            },\n            {\n                selector: 'form[data-inbox-form] input[name=\"message_subject\"]',\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    cb(result);\n                },\n                errorMessage: this.context.enterSubject,\n            },\n            {\n                selector: 'form[data-inbox-form] textarea[name=\"message_content\"]',\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    cb(result);\n                },\n                errorMessage: this.context.enterMessage,\n            },\n        ]);\n\n        $inboxForm.on('submit', event => {\n            inboxValidator.performCheck();\n\n            if (inboxValidator.areAll('valid')) {\n                return;\n            }\n\n            event.preventDefault();\n        });\n    }\n}\n","import $ from 'jquery';\n\n/**\n * Validate that the given date for the day/month/year select inputs is within potential range\n * @param $formField\n * @param validation\n * @returns {{selector: string, triggeredBy: string, validate: Function, errorMessage: string}}\n */\nfunction buildDateValidation($formField, validation) {\n    // No date range restriction, skip\n    if (validation.min_date && validation.max_date) {\n        const invalidMessage = `Your chosen date must fall between ${validation.min_date} and ${validation.max_date}.`;\n        const formElementId = $formField.attr('id');\n        const minSplit = validation.min_date.split('-');\n        const maxSplit = validation.max_date.split('-');\n        const minDate = new Date(minSplit[0], minSplit[1] - 1, minSplit[2]);\n        const maxDate = new Date(maxSplit[0], maxSplit[1] - 1, maxSplit[2]);\n\n        return {\n            selector: `#${formElementId} select[data-label=\"year\"]`,\n            triggeredBy: `#${formElementId} select:not([data-label=\"year\"])`,\n            validate: (cb, val) => {\n                const day = Number($formField.find('select[data-label=\"day\"]').val());\n                const month = Number($formField.find('select[data-label=\"month\"]').val()) - 1;\n                const year = Number(val);\n                const chosenDate = new Date(year, month, day);\n\n                cb(chosenDate >= minDate && chosenDate <= maxDate);\n            },\n            errorMessage: invalidMessage,\n        };\n    }\n}\n\n/**\n * We validate checkboxes separately from single input fields, as they must have at least one checked option\n * from many different inputs\n * @param $formField\n * @param validation\n */\nfunction buildRequiredCheckboxValidation($formField, validation) {\n    const formFieldId = $formField.attr('id');\n    const primarySelector = `#${formFieldId} input:first-of-type`;\n    const secondarySelector = `#${formFieldId} input`;\n\n    return {\n        selector: primarySelector,\n        triggeredBy: secondarySelector,\n        validate: (cb) => {\n            let result = false;\n\n            $(secondarySelector).each((index, checkbox) => {\n                if (checkbox.checked) {\n                    result = true;\n\n                    return false;\n                }\n            });\n\n            cb(result);\n        },\n        errorMessage: `The '${validation.label}' field cannot be blank.`,\n    };\n}\n\nfunction buildRequiredValidation(validation, selector) {\n    return {\n        selector,\n        validate(cb, val) {\n            cb(val.length > 0);\n        },\n        errorMessage: `The '${validation.label}' field cannot be blank.`,\n    };\n}\n\nfunction buildNumberRangeValidation(validation, formFieldSelector) {\n    const invalidMessage = `The value for ${validation.label} must be between ${validation.min} and ${validation.max}.`;\n    const min = Number(validation.min);\n    const max = Number(validation.max);\n\n    return {\n        selector: `${formFieldSelector} input[name=\"${validation.name}\"]`,\n        validate: (cb, val) => {\n            const numberVal = Number(val);\n\n            cb(numberVal >= min && numberVal <= max);\n        },\n        errorMessage: invalidMessage,\n    };\n}\n\n\nfunction buildValidation($validateableElement) {\n    const validation = $validateableElement.data('validation');\n    const fieldValidations = [];\n    const formFieldSelector = `#${$validateableElement.attr('id')}`;\n\n    if (validation.type === 'datechooser') {\n        const dateValidation = buildDateValidation($validateableElement, validation);\n\n        if (dateValidation) {\n            fieldValidations.push(dateValidation);\n        }\n    } else if (validation.required && (validation.type === 'checkboxselect' || validation.type === 'radioselect')) {\n        fieldValidations.push(buildRequiredCheckboxValidation($validateableElement, validation));\n    } else {\n        $validateableElement.find('input, select, textarea').each((index, element) => {\n            const $inputElement = $(element);\n            const tagName = $inputElement.get(0).tagName;\n            const inputName = $inputElement.attr('name');\n            const elementSelector = `${formFieldSelector} ${tagName}[name=\"${inputName}\"]`;\n\n            if (validation.type === 'numberonly') {\n                fieldValidations.push(buildNumberRangeValidation(validation, formFieldSelector));\n            }\n            if (validation.required) {\n                fieldValidations.push(buildRequiredValidation(validation, elementSelector));\n            }\n        });\n    }\n\n    return fieldValidations;\n}\n\n/**\n * Builds the validation model for dynamic forms\n * @param $form\n * @returns {Array}\n */\nexport default function ($form) {\n    let validationsToPerform = [];\n\n    $form.find('[data-validation]').each((index, input) => {\n        validationsToPerform = validationsToPerform.concat(buildValidation($(input)));\n    });\n\n    return validationsToPerform;\n}\n"],"names":["Account","_PageManager","context","_this","call","$state","$","$body","_proto","prototype","onReady","$editAccountForm","classifyForm","$addressForm","$inboxForm","$accountReturnForm","$reorderForm","$invoiceButton","this","passwordRequirements","Wishlist","load","length","registerEditAccountValidation","is","insertStateHiddenField","on","left","window","screen","availWidth","top","availHeight","url","data","open","initAddressFormValidation","registerInboxValidation","initAccountReturnFormValidation","initReorderForm","bindDeleteAddress","event","message","currentTarget","confirm","preventDefault","_this2","$productReorderCheckboxes","submitForm","find","remove","each","index","productCheckbox","productId","val","$input","type","name","value","append","swal","text","selectItem","$last","validationModel","validation","$stateElement","addressValidator","nod","submit","add","stateCountry","err","field","Error","$field","getStatus","Validators","setStateCountryValidation","cleanUpStateValidation","performCheck","areAll","errorMessage","formSubmit","i","ele","parseInt","formEditSelector","editValidator","emailSelector","$emailElement","passwordSelector","$passwordElement","password2Selector","$password2Element","currentPasswordSelector","$currentPassword","setEmailValidation","setPasswordValidation","selector","validate","cb","result","currentPassword","firstName","lastName","phoneNumber","inboxValidator","Number","enterOrderNum","enterSubject","enterMessage","PageManager","$form","validationsToPerform","input","concat","$validateableElement","fieldValidations","formFieldSelector","attr","dateValidation","$formField","min_date","max_date","invalidMessage","formElementId","minSplit","split","maxSplit","minDate","Date","maxDate","triggeredBy","day","month","year","chosenDate","buildDateValidation","push","required","element","$inputElement","tagName","get","inputName","elementSelector","label","min","max","numberVal","buildNumberRangeValidation","buildRequiredValidation","formFieldId","secondarySelector","checkbox","checked","buildRequiredCheckboxValidation","buildValidation"],"sourceRoot":""}